@page "/workouts"
@using SmartWorkout.Entities
@rendermode InteractiveServer
<h3>Workouts</h3>
<DataGrid TItem="Workout"
		  Data="@Workouts"
		  Filterable
		  FilterMode="DataGridFilterMode.Menu"
		  Responsive
		  Editable>
	<DataGridColumn TItem="Workout" Field="Name" Caption="Name"></DataGridColumn>
	<DataGridColumn TItem="Workout" Field="Date" DisplayFormat="{0:MM/dd/yyyy}" Caption="Date"></DataGridColumn>
	<DataGridColumn TItem="Workout" Field="User.FirstName" Caption="User">
		<DisplayTemplate>
			@{
				var user = (context as Workout)?.User;

				if (user != null)
				{
					@($"{user.FirstName} {user.LastName}")
				}
			}
		</DisplayTemplate>
	</DataGridColumn>
	<DataGridCommandColumn TItem="Workout" DeleteCommandAllowed="false" NewCommandAllowed="false">
		<EditCommandTemplate>
			<Button Color="Color.Dark" Clicked="() => EditWorkout(context)">Edit</Button>
			<Button Color="Color.Danger" Clicked="() => OnDeleteButtonClicked(context)">Delete</Button>
		</EditCommandTemplate>
	</DataGridCommandColumn>
</DataGrid>

<DeleteConfirmationDialog @ref="DeleteConfirmation" OnConfirm="HandleDeleteConfirmed"></DeleteConfirmationDialog>